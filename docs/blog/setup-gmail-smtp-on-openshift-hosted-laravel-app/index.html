<!DOCTYPE html><html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport" /><meta content="Setup Gmail SMTP on Openshift hosted Laravel app - Tommy Ku&#39;s Method Stub - Random thoughts, stories and tutorials of a web dev" name="title" /><meta content="Web developer Tommy Ku talks about his experience in work, learning and life." name="description" /><meta content="Tommy Ku" name="author" /><meta content="Setup Gmail SMTP on Openshift hosted Laravel app - Tommy Ku&#39;s Method Stub - Random thoughts, stories and tutorials of a web dev" property="og:title" /><meta content="article" property="og:type" /><title>Setup Gmail SMTP on Openshift hosted Laravel app - Tommy Ku&#39;s Method Stub</title><link href="/style/gutenberg.css" rel="stylesheet" /><link href="/style/tomorrow-night-eighties.css" rel="stylesheet" /><meta content="Nanoc 4.5.2" name="generator" /></head><body><header><h2><img class="author" src="/assets/images/author.jpg" />Tommy Ku's Method Stub</h2><p><i>Reading and thinking</i></p></header><nav><a href="/">Index</a><a href="https://hp.tommyku.com">About Me</a><a href="https://angel.co/tommyku">AngelList</a><a href="https://hk.linkedin.com/in/tommy-ku-65aba999">LinkedIn</a></nav><main id="main"><section id="meta"><h1>Setup Gmail SMTP on Openshift hosted Laravel app</h1><i>Posted on 2015.01.03</i></section><section id="content">
<p><strong>edit</strong>: This guide was written for Laravel 4.2. If you are using Laravel 5.0, similar settings are done separately in your environment configuration file <code>.env</code>, or in <code>config/mail.php</code> directly</p>

<p>This guide simply talk about the setup to send email in Laravel on Openshift similar as <a href="http://blog.tommyku.com/blog/setup-gmail-smtp-on-openshift-hosted-app">a previous post</a>.</p>

<p>It has been a while after my previous post because I have been struggling to get 2 projects online before the end of 2014. As a student I feel freelance projects overwhelming but extremely rewarding forcing myself to learn and create product valued by my clients.</p>

<p>Talk less and do more, see the settings!</p>

<h4 id="show-me-the-code">Show me the code</h4>

<p>Laravel have the process streamlined, all you need to do to configure it, then you can send email using the <code>Mail</code> class. Below is the only configuration file you need to mess with.</p>

<pre><code class="language-php">&lt;?php
/* app/config/mail.php */
return array(
	'driver' =&gt; 'smtp',
	'host' =&gt; 'smtp.gmail.com',
	'port' =&gt; 587,
	'from' =&gt; array('address' =&gt; "{your email address}", 'name' =&gt; "{your name}"),
	'encryption' =&gt; 'tls',
	'username' =&gt; "{your email address}",
	'password' =&gt; "{your gmail password}",
	'sendmail' =&gt; '/usr/sbin/sendmail -bs',
	'pretend' =&gt; false,
);
</code></pre>

<p><code>Mail</code> class provides an extensive interface for sending emails. To send an email you can do something like:</p>

<pre><code class="language-php">/* freshly copied from laravel.com */
Mail::send('emails.welcome', $data, function($message)
{
  $message-&gt;from('us@example.com', 'Laravel');

  $message-&gt;to('foo@example.com')-&gt;cc('bar@example.com');

  $message-&gt;attach($pathToFile);
});
</code></pre>

<p>The same could be done for other SMTP services you currently use. You are done here if you are not using Gmail, and please continue to read the next section if you do use Gmail.</p>

<h4 id="working-with-gmail-important">Working with Gmail (Important)</h4>

<p>You may have noticed that even with the settings right, it is still not working. On this STMP matter Google has introduced a security policy “<a href="https://support.google.com/accounts/answer/6010255">Less Secure Apps</a>”.</p>

<p>If the first email sent via Laravel is not reaching its destination, logon to <a href="gmail.com">Gmail</a> and you are probably seeing a email like this:</p>

<div style="text-align: center;">
<img src="./gmail.png" title="Email [Google Account: sign-in attempt blocked]">
<br>
<small><em>Img.</em> <strong>Good job, Google</strong></small>
</div>

<p>and inside it says</p>

<div style="text-align: center;">
<img src="./lesssecureapp.png" title="Email [Google Account: sign-in attempt blocked]">
<br>
<small><em>Img.</em> <strong>Google doesn’t trust your app</strong></small>
</div>

<p>Google is not confident in your Laravel app but clearly you are. What you need to do is to <a href="https://www.google.com/settings/security/lesssecureapps">follow that link</a> and allow for Google sign in with “less secure apps”.</p>

<h4 id="references">References</h4>

<p><small>
1. <a href="http://laravel.com/docs/4.2/mail">Laravel - The PHP Framework For Web Artisans. (Mail)</a>
2. <a href="http://email.about.com/od/accessinggmail/f/Gmail_SMTP_Settings.html">Accessing Gmail in Your Email Program or Mobile Device - About Email</a>
</small></p>
</section></main><script src="/js/highlight.pack.js" type="text/javascript"></script><script>(function() {
  hljs.initHighlightingOnLoad();

}).call(this);
</script><div id="disqus_thread"></div><script>var disqus_config = function () {
  this.page.url = "https://blog.tommyku.com/blog/setup-gmail-smtp-on-openshift-hosted-laravel-app/";
  this.page.identifier = "setup-gmail-smtp-on-openshift-hosted-laravel-app";
};

(function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = '//methodstub.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript>Please enable JavaScript to view the <a ,="" href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-47055557-3', 'auto');
ga('send', 'pageview');</script></body></html>