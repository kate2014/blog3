<!DOCTYPE html><html lang="en"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><meta charset="utf-8" /><meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport" /><meta content="Setup Gmail SMTP on Openshift hosted app - Tommy Ku&#39;s Method Stub - Random thoughts, stories and tutorials of a web dev" name="title" /><meta content="Web developer Tommy Ku talks about his experience in work, learning and life." name="description" /><meta content="Tommy Ku" name="author" /><meta content="Setup Gmail SMTP on Openshift hosted app - Tommy Ku&#39;s Method Stub - Random thoughts, stories and tutorials of a web dev" property="og:title" /><meta content="article" property="og:type" /><title>Setup Gmail SMTP on Openshift hosted app - Tommy Ku&#39;s Method Stub</title><link href="/style/gutenberg.css" rel="stylesheet" /><link href="/style/tomorrow-night-eighties.css" rel="stylesheet" /><meta content="Nanoc 4.8.0" name="generator" /></head><body><header><h2><img class="author" src="/assets/images/author.jpg" />Tommy Ku's Method Stub</h2><p><i>Reading and thinking</i></p></header><nav><a href="/">Index</a><a href="https://hp.tommyku.com">About Me</a><a href="https://angel.co/tommyku">AngelList</a><a href="https://hk.linkedin.com/in/tommy-ku-65aba999">LinkedIn</a><a href="https://github.com/tommyku">GitHub</a></nav><main id="main"><section id="meta"><h1>Setup Gmail SMTP on Openshift hosted app</h1><i>Posted on 2014.07.26</i></section><section id="content">
<p>Sending email on the PasS Openshift may be a bit troublesome because you cannot install sendmail. By default, mail function of php is not installed as well. You will need to connect to external POP/IMAP/SMTP servers to send and receive email on Openshift. In this post I am showing you how I send verificaiton email from Openshift.</p>

<p>It happens that a project I am working on demands to send verification email upon user registration. <a href="https://www.openshift.com/blogs/enabling-transactional-email-on-paas-with-sendgrid">At first I tried SendGrid with no avail</a> because their terms restrict email types to</p>

<ul>
  <li>Trigger based email notifications and alerts</li>
  <li>Purchase confirmations</li>
  <li>Password reminders</li>
  <li>Marketing email newsletters</li>
</ul>

<p>where verification email is not in the list.</p>

<h4 id="the-silver-lining">The silver lining</h4>

<p>For someone like me who do want to send email but does not have a SMTP server, remember Google. For one Gmail account <a href="https://support.google.com/a/answer/166852?hl=en">you can send up to 99 email via Google’s SMTP server every day</a>, and you can have as many Gmail account as you want.</p>

<p>Openshift opened <a href="https://www.openshift.com/blogs/outbound-mail-ports-are-now-open-for-business-on-openshift">the ports we use to send/receive email</a>, too!</p>

<ul>
  <li>SMTP/submission (25, 465, 587)</li>
  <li>IMAP (143, 220, 993)</li>
  <li>POP (109, 110, 995)</li>
</ul>

<p>Whatever library you use, the protocol is standard, in my project I chose Swift Mailer.</p>

<h4 id="show-me-the-code">Show me the code</h4>

<pre><code class="language-php">&lt;?php

// ...

// make sure you get these SMTP settings right
$transport = Swift_SmtpTransport::newInstance('smtp.gmail.com', 465, "ssl") 
    -&gt;setUsername('yourgmailusername@gmail.com')
    -&gt;setPassword('yourgmailpassword');

$mailer = Swift_Mailer::newInstance($transport);
// the message itself
$message = Swift_Message::newInstance('email subject')
    -&gt;setFrom(array('noreply@example.com' =&gt; 'no reply'))
    -&gt;setTo(array('recipient@example.com'))
    -&gt;setBody("email body");

$result = $mailer-&gt;send($message);

// ...
</code></pre>

<p>You are not restricted to using only Gmail’s server, if you own or have rent a mail server supporting these protocols, it is not hard to set it up to use your own mail server.</p>
</section></main><script src="/js/highlight.pack.js" type="text/javascript"></script><script>(function() {
  hljs.initHighlightingOnLoad();

}).call(this);
</script><div id="disqus_thread"></div><script>var disqus_config = function () {
  this.page.url = "https://blog.tommyku.com/blog/setup-gmail-smtp-on-openshift-hosted-app/";
  this.page.identifier = "setup-gmail-smtp-on-openshift-hosted-app";
};

(function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = '//methodstub.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript>Please enable JavaScript to view the <a ,="" href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-47055557-3', 'auto');
ga('send', 'pageview');</script></body></html>